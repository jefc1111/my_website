<div class="box">
  <table class="table is-fullwidth">
    <thead>
      <tr>
        <th>Artist</th>
        <th>Song</th>
        <th>Time</th>
        <th></th>
        <th class="has-text-centered">Likes (all users)</th>
      </tr>
    </thead>
    <tbody>
      <%= for play <- @last_ten_plays do %>
      <tr>
        <td>
          <%= raw(play.track.artist) %><br />
          <img style="height: 20px;" src="/images/animated-music-image-0073.gif">
        </td>
        <td>
          <%= link(raw(play.track.song), to: "/tracks/#{play.track_id}") %>
        </td>
        <td><%= RadioTracker.Helpers.Dates.human_readable(play.inserted_at) %></td>
        <td>
          <button
            class="button is-black is-responsive"
            phx-click="like"
            phx-value-play-id={play.id}
            disabled={@like_disabled}
          >
            <span class="pink is-size-3">â™¥</span>
            <%= if (! @like_disabled && Track.qty_likes_for_user(play.track, @current_user.id) > 0) do %>
              <span class="like-count">
                <%= Track.qty_likes_for_user(play.track, @current_user.id) %>
              </span>
            <% end %>
          </button>
          <br />
          <%= if (Enum.member?(@allow_undo_track_ids, play.track.id)) do %>
            <button class="button is-white is-small" phx-click="undo" phx-value-play-id={play.id}>
              undo
            </button>
          <% end %>
        </td>
        <td class="has-text-centered">
          <%= Track.qty_likes(play.track) %>
        </td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>
<%= if Mix.env() == :dev do %>
<div class="mb-4">
  <.icon name="globe" type="solid" class="icon is-small" /> <%= @status %>
</div>
<% end %>
